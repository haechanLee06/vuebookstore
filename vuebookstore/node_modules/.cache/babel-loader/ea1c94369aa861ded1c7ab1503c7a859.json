{"remainingRequest":"C:\\Users\\86198\\vuebookstore\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\86198\\vuebookstore\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\86198\\vuebookstore\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\86198\\vuebookstore\\src\\views\\Shopping.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\86198\\vuebookstore\\src\\views\\Shopping.vue","mtime":1678076307000},{"path":"C:\\Users\\86198\\vuebookstore\\babel.config.js","mtime":1678076307000},{"path":"C:\\Users\\86198\\vuebookstore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1704719709000},{"path":"C:\\Users\\86198\\vuebookstore\\node_modules\\babel-loader\\lib\\index.js","mtime":1704721086000},{"path":"C:\\Users\\86198\\vuebookstore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1704719709000},{"path":"C:\\Users\\86198\\vuebookstore\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1704721357000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdTaG9wcGluZycsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG51bWJlcjogMCwKICAgICAgbW9uZXk6ICcwLjAwJywKICAgICAgc2VsZWN0aW9uZGF0YTogW10sCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICB0YW5pbmZvOiB7CiAgICAgICAgTmFtZTogJycsCiAgICAgICAgSW1hZ2U6ICcnLAogICAgICAgIEF1dGg6ICcnLAogICAgICAgIFByaWNlOiAnJwogICAgICB9CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKHsKICAgICAgc2hvcG51bTogc3RhdGUgPT4gc3RhdGUuc2hvcGNhci5zaG9wbnVtLAogICAgICBzaG9wYm9va3M6IHN0YXRlID0+IHN0YXRlLnNob3BjYXIuc2hvcGJvb2tzCiAgICB9KQogIH0sCiAgbWV0aG9kczogewogICAgc2hvcEluZm9FdmVudChkYXRhKSB7CiAgICAgIHRoaXMudGFuaW5mbyA9IHsKICAgICAgICBOYW1lOiBkYXRhLm5hbWUsCiAgICAgICAgSW1hZ2U6IGRhdGEuaW1hZ2UsCiAgICAgICAgQXV0aDogZGF0YS5hdXRoLAogICAgICAgIFByaWNlOiBkYXRhLnByaWNlCiAgICAgIH07CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgaGFuZGxlQ2xvc2UoZG9uZSkgewogICAgICBkb25lKCk7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgfSwKICAgIGRlbEV2ZW50KGluZGV4KSB7CiAgICAgIHRoaXMuc2hvcGJvb2tzLnNwbGljZShpbmRleCwgMSk7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzaG9wY2FyL3JldmlzZV9zaG9wbnVtJywgdGhpcy5zaG9wYm9va3MubGVuZ3RoKTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3Nob3BjYXIvcmV2aXNlX3Nob3Bib29rcycsIHRoaXMuc2hvcGJvb2tzKTsKICAgIH0sCiAgICBoYW5kbGVDaGFuZ2UobnVtLCBkYXRhKSB7CiAgICAgIGlmICh0aGlzLnNlbGVjdGlvbmRhdGEubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMuc2VsZWN0aW9uZGF0YS5tYXAobiA9PiB7CiAgICAgICAgICBpZiAobi5pZCA9PSBkYXRhLmlkKSB7CiAgICAgICAgICAgIG4gPSBkYXRhOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIG47CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5oYW5kbGVTZWxlY3Rpb25DaGFuZ2UodGhpcy5zZWxlY3Rpb25kYXRhKTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZShkYXRhKSB7CiAgICAgIHRoaXMuc2VsZWN0aW9uZGF0YSA9IGRhdGE7CiAgICAgIGlmIChkYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzLm51bWJlciA9IGV2YWwoZGF0YS5tYXAobiA9PiB7CiAgICAgICAgICByZXR1cm4gbi5udW07CiAgICAgICAgfSkuam9pbignKycpKTsKICAgICAgICB0aGlzLm1vbmV5ID0gZXZhbChkYXRhLm1hcChuID0+IHsKICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHBhcnNlSW50KG4ucHJpY2UgKiAxMDApIC8gMTAwICogbi5udW0pLnRvRml4ZWQoMik7CiAgICAgICAgfSkuam9pbignKycpKS50b0ZpeGVkKDIpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMubnVtYmVyID0gMDsKICAgICAgICB0aGlzLm1vbmV5ID0gJzAuMDAnOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["mapState","name","data","number","money","selectiondata","dialogVisible","taninfo","Name","Image","Auth","Price","computed","shopnum","state","shopcar","shopbooks","methods","shopInfoEvent","image","auth","price","handleClose","done","delEvent","index","splice","$store","dispatch","length","handleChange","num","map","n","id","handleSelectionChange","eval","join","parseFloat","parseInt","toFixed"],"sources":["C:\\Users\\86198\\vuebookstore\\src\\views\\Shopping.vue"],"sourcesContent":["<template>\n    <div>\n        <el-affix :offset=\"0\">\n            <Header :active=\"'/shopping'\" />\n        </el-affix>\n    </div>\n    <div style=\"padding: 0 10%\">\n        <div class=\"bg-white p-20\" style=\"text-align: left; min-height: 80vh\">\n            <div class=\"m-b-20\">\n                <span>购物车</span>\n            </div>\n            <el-table :data=\"shopbooks\" border style=\"width: 100%\" :header-cell-style=\"{ background: '#F5F7FA', color: '#666' }\" @selection-change=\"handleSelectionChange\">\n                <el-table-column type=\"selection\" width=\"55\" />\n                <el-table-column type=\"index\" label=\"序号\" width=\"80\" />\n                <el-table-column prop=\"image\" label=\"书籍\" width=\"140\">\n                    <template #default=\"scope\">\n                        <div>\n                            <el-image\n                                style=\"width: 100px\"\n                                :src=\"require('@/assets/imgs/cardbooks/' + scope.row.image + '')\"\n                                :preview-src-list=\"[require('@/assets/imgs/cardbooks/' + scope.row.image + '')]\"\n                                :z-index=\"9999\"\n                                hide-on-click-modal\n                                preview-teleported\n                                close-on-press-escape\n                            />\n                        </div>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"shopinfo\" label=\"书籍简介\" width=\"180\">\n                    <template #default=\"scope\">\n                        <div>\n                            <div>\n                                <span>书名：</span><span>{{ scope.row.name }}</span>\n                            </div>\n                            <div>\n                                <span>作者：</span><span>{{ scope.row.auth }}</span>\n                            </div>\n                        </div>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"price\" label=\"单价\" min-width=\"120\">\n                    <template #default=\"scope\">\n                        <div>\n                            <span>￥{{ scope.row.price }}</span>\n                        </div>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"num\" label=\"数量\" min-width=\"180\">\n                    <template #default=\"scope\">\n                        <div>\n                            <el-input-number v-model=\"scope.row.num\" size=\"large\" :min=\"1\" @change=\"(data) => handleChange(data, scope.row)\" style=\"width: 100%\" />\n                        </div>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"sum\" label=\"小计\" min-width=\"120\">\n                    <template #default=\"scope\">\n                        <div>￥{{ parseFloat((parseInt(scope.row.price * 100) / 100) * scope.row.num).toFixed(2) }}</div>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"caozuo\" label=\"操作\" min-width=\"140\">\n                    <template #default=\"scope\">\n                        <div>\n                            <el-button type=\"primary\" @click=\"shopInfoEvent(scope.row)\">详情</el-button>\n                            <el-button type=\"danger\" icon=\"Delete\" @click=\"delEvent(scope.$index)\"></el-button>\n                        </div>\n                    </template>\n                </el-table-column>\n            </el-table>\n            <div class=\"w-100 flex-r flex-jc-r flex-ai-c m-t-20 end-sum\">\n                <div class=\"c-gray\">\n                    <span>已选择</span><span class=\"c-red\">{{ number }}</span\n                    ><span>件商品</span>\n                </div>\n                <div>\n                    <span>合计：</span><span class=\"c-red f-b f-16\">￥{{ money }}</span>\n                </div>\n                <div><el-button type=\"danger\" size=\"large\" style=\"width: 100px\" :disabled=\"shopnum == 0\">结算</el-button></div>\n            </div>\n\n            <!-- 加弹出框-显示详情 -->\n            <div>\n                <Dialog :dialog=\"dialogVisible\" :title=\"taninfo.Name\" v-on:handleClose=\"handleClose\">\n                    <template v-slot:content>\n                        <div>\n                            <Details :image=\"taninfo.Image\" :name=\"taninfo.Name\" :auth=\"taninfo.Auth\" :price=\"taninfo.Price\" :number=\"'20'\" />\n                        </div>\n                    </template>\n                </Dialog>\n            </div>\n        </div>\n    </div>\n    <div class=\"footer-box f-12 bg-primary\">\n        <Footer />\n    </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\n\nexport default {\n    name: 'Shopping',\n    data() {\n        return {\n            number: 0,\n            money: '0.00',\n            selectiondata: [],\n\n            dialogVisible: false,\n            taninfo: {\n                Name: '',\n                Image: '',\n                Auth: '',\n                Price: ''\n            }\n        }\n    },\n    computed: {\n        ...mapState({\n            shopnum: (state) => state.shopcar.shopnum,\n            shopbooks: (state) => state.shopcar.shopbooks\n        })\n    },\n    methods: {\n        shopInfoEvent(data) {\n            this.taninfo = {\n                Name: data.name,\n                Image: data.image,\n                Auth: data.auth,\n                Price: data.price\n            }\n\n            this.dialogVisible = true\n        },\n        handleClose(done) {\n            done()\n            this.dialogVisible = false\n        },\n        delEvent(index) {\n            this.shopbooks.splice(index, 1)\n            this.$store.dispatch('shopcar/revise_shopnum', this.shopbooks.length)\n            this.$store.dispatch('shopcar/revise_shopbooks', this.shopbooks)\n        },\n        handleChange(num, data) {\n            if (this.selectiondata.length > 0) {\n                this.selectiondata.map((n) => {\n                    if (n.id == data.id) {\n                        n = data\n                    }\n\n                    return n\n                })\n\n                this.handleSelectionChange(this.selectiondata)\n            }\n        },\n\n        handleSelectionChange(data) {\n            this.selectiondata = data\n\n            if (data.length > 0) {\n                this.number = eval(\n                    data\n                        .map((n) => {\n                            return n.num\n                        })\n                        .join('+')\n                )\n\n                this.money = eval(\n                    data\n                        .map((n) => {\n                            return parseFloat((parseInt(n.price * 100) / 100) * n.num).toFixed(2)\n                        })\n                        .join('+')\n                ).toFixed(2)\n            } else {\n                this.number = 0\n                this.money = '0.00'\n            }\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\">\nbody {\n    background-color: #cacaca55;\n}\n\n.footer-box {\n    height: 40px;\n    line-height: 40px;\n    color: #ffffff;\n}\n\n.end-sum {\n    gap: 40px;\n}\n</style>\n"],"mappings":"AAkGA,SAASA,QAAO,QAAS,MAAK;AAE9B,eAAe;EACXC,IAAI,EAAE,UAAU;EAChBC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,MAAM,EAAE,CAAC;MACTC,KAAK,EAAE,MAAM;MACbC,aAAa,EAAE,EAAE;MAEjBC,aAAa,EAAE,KAAK;MACpBC,OAAO,EAAE;QACLC,IAAI,EAAE,EAAE;QACRC,KAAK,EAAE,EAAE;QACTC,IAAI,EAAE,EAAE;QACRC,KAAK,EAAE;MACX;IACJ;EACJ,CAAC;EACDC,QAAQ,EAAE;IACN,GAAGZ,QAAQ,CAAC;MACRa,OAAO,EAAGC,KAAK,IAAKA,KAAK,CAACC,OAAO,CAACF,OAAO;MACzCG,SAAS,EAAGF,KAAK,IAAKA,KAAK,CAACC,OAAO,CAACC;IACxC,CAAC;EACL,CAAC;EACDC,OAAO,EAAE;IACLC,aAAaA,CAAChB,IAAI,EAAE;MAChB,IAAI,CAACK,OAAM,GAAI;QACXC,IAAI,EAAEN,IAAI,CAACD,IAAI;QACfQ,KAAK,EAAEP,IAAI,CAACiB,KAAK;QACjBT,IAAI,EAAER,IAAI,CAACkB,IAAI;QACfT,KAAK,EAAET,IAAI,CAACmB;MAChB;MAEA,IAAI,CAACf,aAAY,GAAI,IAAG;IAC5B,CAAC;IACDgB,WAAWA,CAACC,IAAI,EAAE;MACdA,IAAI,CAAC;MACL,IAAI,CAACjB,aAAY,GAAI,KAAI;IAC7B,CAAC;IACDkB,QAAQA,CAACC,KAAK,EAAE;MACZ,IAAI,CAACT,SAAS,CAACU,MAAM,CAACD,KAAK,EAAE,CAAC;MAC9B,IAAI,CAACE,MAAM,CAACC,QAAQ,CAAC,wBAAwB,EAAE,IAAI,CAACZ,SAAS,CAACa,MAAM;MACpE,IAAI,CAACF,MAAM,CAACC,QAAQ,CAAC,0BAA0B,EAAE,IAAI,CAACZ,SAAS;IACnE,CAAC;IACDc,YAAYA,CAACC,GAAG,EAAE7B,IAAI,EAAE;MACpB,IAAI,IAAI,CAACG,aAAa,CAACwB,MAAK,GAAI,CAAC,EAAE;QAC/B,IAAI,CAACxB,aAAa,CAAC2B,GAAG,CAAEC,CAAC,IAAK;UAC1B,IAAIA,CAAC,CAACC,EAAC,IAAKhC,IAAI,CAACgC,EAAE,EAAE;YACjBD,CAAA,GAAI/B,IAAG;UACX;UAEA,OAAO+B,CAAA;QACX,CAAC;QAED,IAAI,CAACE,qBAAqB,CAAC,IAAI,CAAC9B,aAAa;MACjD;IACJ,CAAC;IAED8B,qBAAqBA,CAACjC,IAAI,EAAE;MACxB,IAAI,CAACG,aAAY,GAAIH,IAAG;MAExB,IAAIA,IAAI,CAAC2B,MAAK,GAAI,CAAC,EAAE;QACjB,IAAI,CAAC1B,MAAK,GAAIiC,IAAI,CACdlC,IAAG,CACE8B,GAAG,CAAEC,CAAC,IAAK;UACR,OAAOA,CAAC,CAACF,GAAE;QACf,CAAC,EACAM,IAAI,CAAC,GAAG,CACjB;QAEA,IAAI,CAACjC,KAAI,GAAIgC,IAAI,CACblC,IAAG,CACE8B,GAAG,CAAEC,CAAC,IAAK;UACR,OAAOK,UAAU,CAAEC,QAAQ,CAACN,CAAC,CAACZ,KAAI,GAAI,GAAG,IAAI,GAAG,GAAIY,CAAC,CAACF,GAAG,CAAC,CAACS,OAAO,CAAC,CAAC;QACxE,CAAC,EACAH,IAAI,CAAC,GAAG,CACjB,CAAC,CAACG,OAAO,CAAC,CAAC;MACf,OAAO;QACH,IAAI,CAACrC,MAAK,GAAI;QACd,IAAI,CAACC,KAAI,GAAI,MAAK;MACtB;IACJ;EACJ;AACJ"}]}